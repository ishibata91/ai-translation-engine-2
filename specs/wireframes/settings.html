<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>Settings - Mocks</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@latest/dist/full.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            fetch('components/sidebar.html')
                .then(res => res.text())
                .then(data => {
                    document.getElementById('sidebar-container').innerHTML = data;
                });
            fetch('components/log_viewer.html')
                .then(res => res.text())
                .then(data => {
                    document.getElementById('log-container').innerHTML = data;
                });
        });
    </script>
</head>

<body class="flex flex-col">

    <div class="flex">

        <!-- 左サブナビゲーション (インポート先) -->
        <div id="sidebar-container">
            <!-- components/sidebar.html -->
        </div>

        <!-- 中央メインコンテンツ -->
        <div class="flex flex-col w-full p-4 gap-4">

            <!-- ヘッダー部分 -->
            <div class="navbar">
                <div class="flex justify-between items-center w-full">
                    <span>設定 (Settings)</span>
                    <div class="flex gap-4">
                        <button class="btn btn-ghost">リセット</button>
                        <button class="btn btn-primary">設定を保存</button>
                    </div>
                </div>
            </div>

            <!-- コンテンツエリア -->
            <div class="grid grid-cols-1 gap-4">

                <!-- LLMプロバイダ設定 -->
                <div class="card card-compact">
                    <div class="card-body">
                        <span>LLMプロバイダ設定</span>

                        <div class="flex flex-col gap-4">
                            <div class="flex flex-col gap-4">
                                <label class="label">
                                    <span class="label-text">アクティブなプロバイダ</span>
                                </label>
                                <select class="select select-bordered w-full max-w-md">
                                    <option>Google Gemini</option>
                                    <option>OpenAI (GPT-4o)</option>
                                    <option>xAI (Grok)</option>
                                    <option>Local LLM (llama.cpp / Ollama)</option>
                                </select>
                            </div>

                            <div class="flex flex-col gap-4">
                                <label class="label">
                                    <span class="label-text">Gemini APIキー</span>
                                </label>
                                <input type="password" placeholder="AIzaSy..."
                                    class="input input-bordered w-full max-w-md" />
                            </div>

                            <div class="flex flex-col gap-4">
                                <label class="label">
                                    <span class="label-text">OpenAI APIキー</span>
                                </label>
                                <input type="password" placeholder="sk-..."
                                    class="input input-bordered w-full max-w-md" />
                            </div>

                            <div class="flex flex-col gap-4">
                                <label class="label">
                                    <span class="label-text">xAI APIキー</span>
                                </label>
                                <input type="password" placeholder="xai-..."
                                    class="input input-bordered w-full max-w-md" />
                            </div>
                        </div>

                    </div>
                </div>

                <!-- RAGプロンプト・テンプレート管理 -->
                <div class="card card-compact">
                    <div class="card-body">
                        <span>RAGプロンプト・テンプレート管理</span>
                        <div class="text-sm text-gray-400">modules/prompts.py で定義されているシステム全体のRAG構築・翻訳推論に用いる指示を調整します。
                        </div>

                        <div class="flex flex-col gap-2 mt-4">
                            <!-- セクション1: 共通システム構築 -->
                            <div class="collapse collapse-arrow bg-base-200">
                                <input type="radio" name="prompt-accordion" checked="checked" />
                                <div class="collapse-title font-medium">1. 共通システムプロンプト (System Prompts)</div>
                                <div class="collapse-content flex flex-col gap-4">
                                    <div class="flex flex-col gap-2">
                                        <label class="label"><span class="label-text">ベース指示 (PROMPT_BASE)</span></label>
                                        <textarea class="textarea textarea-bordered"
                                            rows="2">You are a localization specialist for 'The Elder Scrolls V: Skyrim'. Translate the text inside <source_text> into natural Japanese suitable for a fantasy RPG setting.</textarea>
                                    </div>
                                    <div class="flex flex-col gap-2">
                                        <label class="label"><span class="label-text">制約事項
                                                (PROMPT_PROHIBITION)</span></label>
                                        <textarea class="textarea textarea-bordered"
                                            rows="4">- STRICTLY PROHIBITED: Do not add tags or placeholders that do not exist in the original text.&#10;- STRICTLY PROHIBITED: Do not incorporate factual details from <summary> into the translation text. Use <summary> ONLY for context understanding.</textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- セクション2: レコード別タスク指示 -->
                            <div class="collapse collapse-arrow bg-base-200">
                                <input type="radio" name="prompt-accordion" />
                                <div class="collapse-title font-medium">2. レコード種別固有指示 (Record Specific Instructions)
                                </div>
                                <div class="collapse-content flex flex-col gap-4">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="flex flex-col gap-2">
                                            <label class="label"><span class="label-text font-mono">WEAP
                                                    (武器)</span></label>
                                            <textarea class="textarea textarea-bordered"
                                                rows="2">Target is a weapon name or description. Convey material, magical effects, and weightiness.</textarea>
                                        </div>
                                        <div class="flex flex-col gap-2">
                                            <label class="label"><span class="label-text font-mono">INFO
                                                    (会話)</span></label>
                                            <textarea class="textarea textarea-bordered"
                                                rows="2">Target is an NPC dialogue. Translate into natural spoken Japanese based on <meta> speaker attributes.</textarea>
                                        </div>
                                    </div>
                                    <button class="btn btn-ghost btn-sm self-end">一覧をすべて編集...</button>
                                </div>
                            </div>

                            <!-- セクション3: 話法・トーンマッピング -->
                            <div class="collapse collapse-arrow bg-base-200">
                                <input type="radio" name="prompt-accordion" />
                                <div class="collapse-title font-medium">3. トーン＆パーソナリティ紐付け (Tone Mapping)</div>
                                <div class="collapse-content flex flex-col gap-4">
                                    <div class="tabs tabs-boxed">
                                        <a class="tab tab-active">種族 (Race_Tone)</a>
                                        <a class="tab">ボイス (Voice_Tone)</a>
                                    </div>
                                    <div class="flex flex-col gap-4">
                                        <div class="flex flex-col gap-2">
                                            <label class="label"><span class="label-text font-mono">Khajiit /
                                                    KhajiitRace</span></label>
                                            <textarea class="textarea textarea-bordered"
                                                rows="2">[STRICT RULE] Always refer to self in the third person. First-person pronouns are STRICTLY FORBIDDEN. Use distinctive Khajiit speech patterns.</textarea>
                                        </div>
                                        <div class="flex flex-col gap-2">
                                            <label class="label"><span class="label-text font-mono">HighElf /
                                                    Altmer</span></label>
                                            <textarea class="textarea textarea-bordered"
                                                rows="2">Arrogant and politely rude elite tone. Show off superior intelligence and culture.</textarea>
                                        </div>
                                    </div>
                                    <button class="btn btn-ghost btn-sm self-end">全マッピングを編集...</button>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>

    <!-- ログビューア (インポート先) -->
    <div id="log-container">
        <!-- components/log_viewer.html -->
    </div>

</body>

</html>