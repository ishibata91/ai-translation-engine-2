## MODIFIED Requirements

### Requirement: GridEditorによる辞書エントリー編集UI
詳細画面または一画面遷移を介して、辞書そのもののエントリー群（単語、訳語などのフィールド）を、インライン編集可能な表である `GridEditor` 上で管理できなければならない（SHALL）。
今回新たに、**表示は一度に500件単位でのページネーション（サーバーサイド制御）として取得・表示**されなければならない（SHALL）。
また、GridEditorに備わっている各カラムの「絞り込みフィルタ」機能は、1文字入力するたびに即時評価される（リアルタイムフィルタ）のではなく、**「検索ボタン」を配置し、押下したタイミングで初めて適用（検索結果に対するさらなる絞り込み、または再度のバックエンドからの検索）されなければならない（SHALL）**。
「クリアボタン」も併せて配置し、使用することでフィルタを解除して元の全体データ（500件ページネーションされた一覧）に復帰できなければならない（SHALL）。
このフィルタ機能の仕様（ボタン押下による反映およびクリア）は、単一ソースのエントリ一覧表示においても全く同じく適用されなければならない（SHALL）。

さらに、**GridEditorに備わっていた「＋ 行追加」ボタンおよび機能は削除されなければならない（SHALL）**。
エントリ一覧画面（および横断検索画面）からは既存エントリのインライン編集および削除操作が可能であり、**削除が行われた場合は即座に永続化されるのではなく「編集中（未保存）の状態」として扱われなければならない（SHALL）**。
編集中（未保存の削除や編集がある状態）に「戻る」ボタンを押下しようとした場合は、未保存の変更が破棄される旨の警告（確認モーダルやアラート）を表示し、ユーザーが誤って変更を破棄しないように保護しなければならない（SHALL）。
また、編集中状態において提供される「もとに戻す（全て元に戻す）」機能によって、未保存の編集や削除操作をキャンセルし、元のデータ状態へリセット可能でなければならない（SHALL）。

#### Scenario: ページネーションを伴うGridEditorの表示
- **WHEN** ユーザーが辞書エントリー領域（GridEditor）にアクセスしたとき
- **THEN** 初回は最大500件の範囲でエントリーが一覧表示され、行追加ボタンは存在しないこと
- **AND** 次ページへのナビゲーションUIが提供されること

#### Scenario: 未保存の削除および編集における警告と取り消し
- **WHEN** ユーザーが既存エントリを編集または削除し、保存ボタンを押さずに「戻る」等の別画面遷移操作を行ったとき
- **THEN** 未保存の変更が存在する旨の警告ダイアログが表示されること
- **WHEN** ユーザーが「もとに戻す」ボタンをクリックしたとき
- **THEN** これまでの編集内容や削除操作がすべて破棄機能によりキャンセルされ、元のデータ状態に復帰すること

#### Scenario: 検索ボタンを用いた手動フィルタ適用とクリア
- **WHEN** ユーザーがカラムフィルタ条件を入力し、「検索」ボタンをクリックしたとき
- **THEN** 入力内容に基づいて一覧がフィルタリングされること（入力途中に自動でフィルタされないこと）
- **WHEN** ユーザーが「クリア」ボタンをクリックしたとき
- **THEN** フィルタ条件がリセットされ、フィルタ適用前の全体データ（500件単位）が再度表示されること

### Requirement: 複数ファイルのアップロードと選択状態の保持
ユーザーはインポート用の辞書ファイル（SSTXMLなど）を複数同時に選択・管理できなければならない（SHALL）。
Web標準の `<input type="file">` による絶対パス取得不可の制約を回避するため、ファイルの選択にはWailsのネイティブファイルダイアログ（`runtime.OpenMultipleFilesDialog`）を呼び出して利用しなければならない（SHALL）。
**追加要件として、ファイルのインポートエリア（UI）は何もインポートされていない（ファイル未選択時や処理が行われていない）初期状態においては、不必要に縦幅を占有しないように視覚的にコンパクトな状態（高さを制限・縮小表示）に保たれなければならない（SHALL）**。
ファイルの追加後やインポート処理中など一時的に情報量が増す場合にのみ、表示に必要な高さまで拡張表示されてよい（拡張は許可される）。

#### Scenario: 未選択時でのコンパクトなUI表示
- **WHEN** インポート対象のファイルが選択されていない（初期状態の）とき
- **THEN** インポートパネル・領域は縮小され、他のUIを圧迫しないようコンパクトに表示されること

#### Scenario: ファイルの追加とUIの柔軟な拡張
- **WHEN** ユーザーがファイル選択パネルにてファイルを追加したとき、またはインポート実行中のとき
- **THEN** 必要な情報を十分表示するために、ファイルインポートUIの高さが自動的に拡張されること
- **AND** 以前に選択されたファイル群は失われずに追加（スタック）され、重複排除される等の既存仕様を満たすこと

### Requirement: 辞書エントリの CRUD (GridEditor サポート)
UI でのインライン編集を可能にするため、バックエンドは個別のエントリ操作をサポートしなければならない。
なお、エントリの取得メソッドはページネーション対応を前提とし、`limit` と `offset` および `query` パラメータを新たに要求し、全体件数（`TotalCount`）の情報とともに結果を返す仕様へと変更されなければならない（SHALL）。

#### Scenario: ソースに紐づくエントリのページネーション取得
- **WHEN** `GetEntriesBySourceIDPaginated(sourceID, query, limit, offset)` （または同義のメソッド）が呼び出されたとき
- **THEN** 条件に一致する一部の `dlc_dictionary_entries` レコードと、検索条件に合致する全体の総数を示す `TotalCount` を併せて構造体として返さなければならない。

#### Scenario: エントリの更新と削除
- **WHEN** `UpdateEntry(term)` が呼び出されたとき
- **THEN** `dlc_dictionary_entries` 内の特定の ID に対して情報を更新すること。
- **WHEN** `DeleteEntry(id)` が呼び出されたとき
- **THEN** 対象レコードをデータベースから削除しなければならない。
